#!/bin/bash +x

ROOT="$( cd "$( dirname "${BASH_SOURCE[0]}" )/../" && pwd )"

. "${ROOT}"/bin/lib/exitCheck.sh

if [ "$USE_PHP5" = "1" ]; then
    bin/php5/phpunit "$@"
    exitCheck $?
    exit 0;
fi

. "${ROOT}"/bin/lib/env.sh
. "${ROOT}"/bin/lib/tty.sh

docker run \
    -i${TTY} \
    --rm \
    -v "$(pwd)":/app \
    -w /app \
	--link web:dockermachine.local \
	--net ${PROJECT_NAME}_default \
	chekote/php:7.2.16-phpunit5 php ./vendor/phpunit/phpunit/phpunit --configuration=phpunit.xml "$@"

exitCheck $?
