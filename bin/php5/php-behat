#!/bin/bash +x

ROOT="$( cd "$( dirname "${BASH_SOURCE[0]}" )/../../" && pwd )"

. "${ROOT}"/bin/lib/exitCheck.sh

. "${ROOT}"/bin/lib/env.sh
. "${ROOT}"/bin/lib/tty.sh

if [ ! "$(docker image ls | grep php5-behat)" ]; then
    docker build --tag "php5-behat" "${ROOT}"/docker/php5.6.40-behat3.4/
    exitCheck $?
fi

docker run \
    -i${TTY} \
    --rm \
    -v "$(pwd)":/app \
    -w /app \
	--link web:dockermachine.local \
	--net ${PROJECT_NAME}_default \
	php5-behat php "$@"

exitCheck $?
